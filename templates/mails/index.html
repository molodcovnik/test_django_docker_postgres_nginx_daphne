{% extends 'flatpages/default.html' %}
{% load static %}

{% block content %}
<div class="header-main">
    {% if request.user.is_authenticated %}
    <a href="{% url 'account-create' %}" class="create_new_mail_account">Добавить почту</a>
    {% else %}
    <a href="{% url 'login' %}" class="create_new_mail_account">Войдите в аккаунт</a>
    {% endif %}
    {% if accounts %}
    <div class="email-account-wrapper">
        {% for account in accounts %}
            <div class="mail-account">
                <p>{{ account.email }}</p>
                <p>{{ account.provider }}</p>
                <a href="{% url 'feed' account.id %}" class="select-button">Посмотреть почту</a>
            </div>
        {% endfor %}
    </div>
    {% else %}
    <h2>Добавьте почтовые аккаунты в настройках</h2>
    {% endif %}
</div>

{{ user_id | json_script:"user_id" }}
<script>
    let userId = {{ user_id }};
    
    // Функция для получения email-аккаунтов с сервера

    // Функция для создания выпадающего списка на основе полученных данных

    // Инициализация, предположим, что user_id = 1

</script>
{% endblock %}